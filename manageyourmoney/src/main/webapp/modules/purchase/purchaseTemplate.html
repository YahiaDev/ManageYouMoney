<div nav-directive purchase='1'></div>
</br>
<div class="container-fluid">
	<div class="row">
		<div class="col-sm-3">
			<div class="card" style="width: 100%">
			  <div class="card-header">
			    Add Purchase
			  </div>
			  <div class="card-block">
			  	<form name="add_purchase_form" ng-submit="add_purchase_form.$valid && purchaseC.addPurchase()">
			  		<!--div class="row md-block" style="width: 100%"-->
			  		<div class="alert alert-success" role="alert" ng-if="purchaseC.purchaseAdded">
	  					<strong>Well done!</strong> Purchase successfully added
					</div>
			  		<div layout-gt-sm="row">
					    <md-autocomplete flex required style="width: 100%" 
					      md-input-name="autocompleteField"
					      md-no-cache="false"
					      md-selected-item="purchaseC.selectedPurchaseCat"
					      md-search-text="purchaseC.searchPurchaseCat"
					      md-items="item in purchaseC.querySearch(purchaseC.searchPurchaseCat)"
					      md-item-text="item.labelCat"
					      md-require-match
					      md-floating-label="Purchase Category">
				        <md-item-template>
				          <span md-highlight-text="searchPurchaseCat">{{item.labelCat}}</span>
				        </md-item-template>
				        <!--md-not-found>
				          No Purchase category matching "{{searchPurchaseCat}}" were found.
				          <a ng-click="createNewPurchaseCat(searchPurchaseCat)">Create a new one!</a>
				        </md-not-found-->
				        <div ng-messages="add_purchase_form.autocompleteField.$error" ng-if="add_purchase_form.autocompleteField.$touched">
	            			<div class="md-input-message-animation" ng-message="required">You <b>must</b> have a purchase category.</div>
	            			<div class="md-input-message-animation" ng-message="md-require-match">Please select an existing purchase categoty.</div>
	            			<!--div class="md-input-message-animation" ng-message="minlength">Your entry is not long enough.</div-->
	            			<!--div class="md-input-message-animation" ng-message="maxlength">Your entry is too long.</div-->
          				</div>
	      				</md-autocomplete>
      				</div>
				  	<div layout-gt-sm="row">
			          <md-input-container class="md-block" flex-gt-sm>
			            <label>Purchase Label</label>
			            <input name="purlab" ng-model="purchaseC.purchase.label" required>
			            <div ng-messages="add_purchase_form.purlab.$error" ng-if="add_purchase_form.purlab.$touched">
	            			<div class="md-input-message-animation" ng-message="required">You <b>must</b> have a purchase label.</div>
          				</div>
			          </md-input-container>
			       </div>
			       <div layout-gt-sm="row">
			          <md-input-container class="md-block" flex-gt-sm>
			            <label>Purchase Date</label>
			            <md-datepicker name="purchase_date" ng-model="purchaseC.purchase.date" required></md-datepicker>
			            <div ng-messages="add_purchase_form.purchase_date.$error" ng-if="add_purchase_form.purchase_date.$touched">
	            			<div class="md-input-message-animation" ng-message="required">You <b>must</b> have a purchase date.</div>
          				</div>
			          </md-input-container>
			        </div>
			        <div layout-gt-sm="row">
				        <md-input-container class="md-icon-float md-icon-right md-block" flex-gt-sm>
						    <label>Purchase Amount</label>
					      	<input name="purchase_amount" ng-model="purchaseC.purchase.amount" type="number" step="0.01" required>
					      	<div ng-messages="add_purchase_form.purchase_amount.$error" ng-if="add_purchase_form.purchase_amount.$touched">
	            			<div class="md-input-message-animation" ng-message="required">You <b>must</b> have a purchase date.</div>
          				</div>
					    </md-input-container>
				    </div>
				    <div layout-gt-sm="row">
				      <div class="offset-sm-7 col-sm-5">
				        <button type="submit" class="btn btn-primary">Add purchase</button>
				      </div>
				    </div>
			  	</form>
			  </div>
			</div>
		</div>
		<div class="col-sm-9">
			<div my-grid grid-data="purchaseC.gridData" column-defs="purchaseC.columnDefs" schema="purchaseC.modalEditSchema" form="purchaseC.modalEditForm" modal-edit-title="'Edit purchase'" confirm-remove-modal-message="'Delete purchase'" ng-if="purchaseC.purchaseCatDataLoaded && purchaseC.purchaseDataLoaded"></div>
		</div>
	</div>
</div>


